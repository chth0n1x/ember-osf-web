<GuidFile::-Components::FileDetailLayout
    @rightColumnClosed={{this.rightColumnClosed}}
    @isMobile={{this.media.isMobile}}
>
    <:header>
        <h3>
            <OsfLink
                data-test-project-link
                data-analytics-name='Linked project'
                local-class='ProjectLink'
                @route={{if (eq this.model.fileModel.target.type 'registrations') 'guid-registration' 'guid-node'}}
                @models={{array this.model.fileModel.target.id}}
            >
                {{this.model.fileModel.target.title}}
            </OsfLink>
        </h3>
        <div local-class='FlexContainerRow'>
            {{#if this.shouldShowEdit}}
                <h2>
                    <div local-class='EditFilenameField' id='fileName'>
                        <div
                            data-toggle='tooltip'
                            data-tip='tooltip'
                            data-placement='top'
                            data-target='#userInput'
                            title={{t 'file_actions_menu.rename_message' this.model.name}}
                        >
                            <input
                                id='userInput'
                                type='search'
                                local-class='UserInputField'
                                data-toggle='tooltip'
                                data-placement='top'
                                data-target='#userInput'
                                data-tip='tooltip'
                                title={{t 'file_actions_menu.rename_message' this.model.name}}
                                alt={{t 'file_actions_menu.rename_message' this.model.name}}
                                name={{this.model.name}}
                                placeholder={{this.model.name}}
                                key-press={{action this.validateFileName}}
                            />
                        </div>
                        <BsButton
                            @onClick={{this.clearField}}
                            local-class='CancelButton'
                        >
                            {{t 'general.cancel_button'}}
                        </BsButton>
                        <span>
                            <BsTooltip
                                data-toggle='tooltip'
                                data-tip='tooltip'
                                data-placement='top'
                                data-target='#userInput'
                            >
                                {{t 'file_actions_menu.rename_message' this.model.name}}
                            </BsTooltip>
                        </span>
                        <BsButton
                            {{!-- type='submit' --}}
                            role='button'
                            {{!-- value={{t 'file_actions_menu.rename_button'}} --}}
                            local-class='RenameButton'
                            click={{this.renameFile}}
                        >
                            {{t 'file_actions_menu.rename_button'}}
                        </BsButton>
                    </div>
                </h2>
            {{else}}
                <h2 data-test-filename>
                    {{this.model.name}}
                    {{#if this.viewedVersion}}
                        ({{t 'general.version'}}: {{this.viewedVersion}})
                    {{/if}}
                </h2>
            {{/if}}
            <FileActionsMenu
                @item={{this.model.fileModel}}
                @horizontalPosition='right'
                @shouldShowEditToggle={{this.shouldShowEditToggle}}
                local-class='FileActionsButton'
            />
        </div>
    </:header>
    <:body>
        <div data-test-file-renderer id='mfrIframeParent' local-class='FileRenderer'>
            <FileRenderer
                @download={{this.model.links.download}}
                @version={{this.viewedVersion}}
            />
        </div>
    </:body>
    <:right>
        {{#if this.revisionsOpened}}
            <section data-test-revisions-tab local-class='FileDetail__revisions'>
                <h2 local-class='FileDetail__right-section-heading'>{{t 'general.revisions'}}</h2>
                <ol local-class='FileDetail__revision-list' reversed>
                    <hr>
                    {{#if this.model.getRevisions.isRunning}}
                        <LoadingIndicator @dark={{true}} />
                    {{else}}
                        {{#each this.model.waterButlerRevisions as |version|}}
                            <FileVersion
                                @version={{version}}
                                @downloadUrl={{this.model.links.download}}
                                @changeVersion={{this.changeVersion}}
                            />
                            <hr>
                        {{else}}
                            {{t 'file_detail.no_revisions'}}
                        {{/each}}
                    {{/if}}
                </ol>
            </section>
        {{/if}}
        {{#if this.tagsOpened}}
            <div local-class='RightContainer'>
                <h2>{{t 'general.tags'}}</h2>
                <TagsWidget
                    @taggable={{this.model.fileModel}}
                    @readOnly={{not this.model.userCanEditMetadata}}
                    @inline={{true}}
                />
            </div>
        {{/if}}
    </:right>
    <:rightButtons>
        {{#if this.media.isMobile}}
            <BsButton
                data-test-file-renderer-button
                data-analytics-name='File renderer button'
                local-class='SlideButtons {{if this.rightColumnClosed 'Active'}}'
                @size='lg'
                @onClick={{this.toggleFileRenderer}}
            >
                <FaIcon @icon='file-alt' @fixedWidth={{true}}/>
            </BsButton>
        {{/if}}
        <BsButton
            aria-label={{if this.revisionsOpened (t 'file_detail.close_revisions') (t 'file_detail.view_revisions')}}
            data-test-versions-button
            data-analytics-name='Versions button'
            local-class='SlideButtons {{if this.revisionsOpened 'Active'}}'
            @size='lg'
            @onClick={{this.toggleRevisions}}
        >
            <FaIcon @icon='history' @fixedWidth={{true}}/>
        </BsButton>
        <BsButton
            aria-label={{if this.tagsOpened (t 'file_detail.close_tags') (t 'file_detail.view_tags')}}
            data-test-tags-button
            data-analytics-name='Tags button'
            local-class='SlideButtons {{if this.tagsOpened 'Active'}}'
            @size='lg'
            @onClick={{this.toggleTags}}
        >
            <FaIcon @icon='tags' @fixedWidth={{true}}/>
        </BsButton>
    </:rightButtons>
</GuidFile::-Components::FileDetailLayout>
